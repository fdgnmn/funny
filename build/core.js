!function(){function e(e,r){n&&"douban-movie"==n.name||(n=chrome.runtime.connect({name:"douban-movie"}),n.onMessage.addListener(function(e){var n=e.url,r=n.search("&key="),s="https://neets.cc/search?page-size=6&type=2&key="+n.substring(r+5),i=e.neetLinks;if(!e.success)return void(a[n].found=!1);a[n].found=!0;for(var o;a[n].tasks.length>0;){o=a[n].tasks.pop();var l=t(s,i);o.parentTag.insertBefore(l,o.parentTag.childNodes[0])}}));var s="https://smartapi.neets.cc/full-texts/grab-datas?pageNo=1&pageSize=15&seriesSize=9&themeSize=3&key="+e;a[s]||(a[s]={tasks:[]}),a[s].found||void 0==a[s].found&&(a[s].tasks.push({parentTag:r}),n.postMessage({url:s}))}function t(e,t){var n=["acfun.cn","bilibili.com"],a=document.createElement("div"),s=document.createElement("h2"),i=document.createElement("a");a.setAttribute("class","gray_ad"),s.innerText="豆瓣电影传送门  · · · · · ·",i.setAttribute("href",r),i.setAttribute("target","_blank"),i.setAttribute("class","report-error"),i.innerText="反馈",a.appendChild(s),a.appendChild(i);var o=document.createElement("ul");o.setAttribute("class","bs");for(var l=0;l<t.length;l++){for(var d=t[l][2],u=!1,c=0;c<n.length;c++)-1!=d.indexOf(n[c])&&(console.log("url: "+d),u=!0);if(1!=u){var m=document.createElement("li"),p=document.createElement("a"),h=document.createElement("span"),b=t[l][1];p.setAttribute("href",d),p.setAttribute("target","_blank"),p.setAttribute("class","playBtn"),p.innerHTML=t[l][0],h.setAttribute("class","buylink-price"),b=b.replace(" ",""),h.innerHTML=b||"免费",m.appendChild(p),m.appendChild(h),o.appendChild(m)}}var v=document.createElement("li"),f=document.createElement("a");return f.setAttribute("href",e),f.setAttribute("target","_blank"),f.setAttribute("class","playBtn"),f.innerHTML="发现更多>>>",v.appendChild(f),o.appendChild(v),a.appendChild(o),a}var n=null,a={},r="https://github.com/Neulana/douban-movie-extension/issues";!function(){var e=document.createElement("style");e.appendChild(document.createTextNode("")),document.head.appendChild(e);var t={".buylink-price":{left:"130px",position:"absolute",color:"#999"},".gray_ad .report-error":{color:"#999",display:"none",position:"absolute",top:"10px",right:"10px",background:"transparent"},".gray_ad .report-error:hover":{display:"inline"}};for(var n in t){var a=n+"{";for(var r in t[n])a+=r+": "+t[n][r]+";";a+="} ",e.sheet.insertRule(a,0)}}(),"movie.douban.com"===window.location.hostname&&function(){var t=document.getElementsByTagName("h1")[0],n=t.firstElementChild.innerText.split(" ")[0],a=document.getElementsByClassName("aside");if(a&&e(n,a[0]),"book.douban.com"===window.location.hostname){var r=document.getElementsByClassName("nav-items");r&&r[0]&&(r[0].addEventListener("mouseover",function(){var e=document.getElementById("neets-menu");e&&(e.style.display="inline-block")},!1),r[0].addEventListener("mouseout",function(){var e=document.getElementById("neets-menu");e&&(e.style.display="none")},!1))}}()}();